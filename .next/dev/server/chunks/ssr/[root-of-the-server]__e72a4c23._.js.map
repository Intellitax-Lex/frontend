{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/anadesouza/Documents/intellitax-lex/app/login/page.tsx"],"sourcesContent":["// app/(public)/login/page.tsx\n// Esta página debe ser un Client Component para manejar el formulario.\n'use client';\n\nimport React, { useState } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\n// Asumimos que Ana crea un cliente Supabase en esta ruta\n// import { createClient as createClientComponentClient } from '@/lib/supabase/client';\nimport { Loader2 } from 'lucide-react';\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false); // Estado de carga\n  const router = useRouter();\n  // Usamos el cliente del navegador (client.ts)\n  // const supabase = createClientComponentClient(); \n\n  const handleLogin = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setError(null);\n    setIsLoading(true);\n\n    // const { error: signInError } = await supabase.auth.signInWithPassword({\n    //   email,\n    //   password,\n    // });\n\n    const signInError = null;\n\n    if (signInError) {\n      setError('Credenciales inválidas. Por favor, intente de nuevo.');\n      console.error(signInError.message);\n      setIsLoading(false);\n    } else {\n      // Éxito. Redirigir al dashboard.\n      // El router.refresh() es clave para que el Server Layout (app/layout)\n      // detecte la nueva sesión y cargue los datos correctos.\n      router.push('/dashboard'); // (O '/admin/dashboard' si detectamos rol)\n      router.refresh(); \n      // No necesitamos setIsLoading(false) porque la página redirige.\n    }\n  };\n\n  return (\n    <div className=\"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        {/* Logo */}\n        <h2 className=\"mt-6 text-center text-3xl font-bold tracking-tight text-teal-400\">\n          IntelliTax Lex\n        </h2>\n        <h3 className=\"mt-2 text-center text-xl font-medium text-white\">\n          Iniciar sesión en tu cuenta\n        </h3>\n      </div>\n\n      <div className=\"mt-10 sm:mx-auto sm:w-full sm:max-w-md\">\n        {/* Tarjeta de Formulario */}\n        <div className=\"bg-blue-900 p-8 shadow-xl ring-1 ring-blue-700 sm:rounded-lg\">\n          <form className=\"space-y-6\" onSubmit={handleLogin}>\n            {/* Campo de Email */}\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium leading-6 text-blue-200\">\n                Email\n              </label>\n              <div className=\"mt-2\">\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  required\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  className=\"block w-full rounded-md border-0 bg-blue-800/50 py-2.5 text-white shadow-sm ring-1 ring-inset ring-blue-700 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-teal-500 sm:text-sm sm:leading-6\"\n                />\n              </div>\n            </div>\n\n            {/* Campo de Contraseña */}\n            <div>\n              <div className=\"flex items-center justify-between\">\n                <label htmlFor=\"password\" className=\"block text-sm font-medium leading-6 text-blue-200\">\n                  Contraseña\n                </label>\n                <div className=\"text-sm\">\n                  <a href=\"#\" className=\"font-semibold text-teal-400 hover:text-teal-300\">\n                    ¿Olvidaste tu contraseña?\n                  </a>\n                </div>\n              </div>\n              <div className=\"mt-2\">\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  autoComplete=\"current-password\"\n                  required\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"block w-full rounded-md border-0 bg-blue-800/50 py-2.5 text-white shadow-sm ring-1 ring-inset ring-blue-700 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-teal-500 sm:text-sm sm:leading-6\"\n                />\n              </div>\n            </div>\n\n            {/* Mensaje de Error */}\n            {error && (\n              <div className=\"rounded-md bg-red-900/50 p-3 ring-1 ring-red-700\">\n                <p className=\"text-sm text-red-300\">{error}</p>\n              </div>\n            )}\n\n            {/* Botón de Submit */}\n            <div>\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                className=\"flex w-full justify-center rounded-md bg-teal-500 px-3 py-2.5 text-sm font-semibold leading-6 text-blue-950 shadow-sm hover:bg-teal-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-teal-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {isLoading ? (\n                  <Loader2 className=\"h-5 w-5 animate-spin\" />\n                ) : (\n                  'Iniciar Sesión'\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n\n        {/* Link a Registro */}\n        <p className=\"mt-10 text-center text-sm text-blue-300\">\n          ¿No eres miembro?{' '}\n          <Link href=\"/registro\" className=\"font-semibold leading-6 text-teal-400 hover:text-teal-300\">\n            Regístrate ahora\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"AAAA,8BAA8B;AAC9B,uEAAuE;;;;;;AAGvE;AACA;AACA;AACA,yDAAyD;AACzD,uFAAuF;AACvF;AAPA;;;;;;AASe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC,QAAQ,kBAAkB;IACrE,MAAM,SAAS,IAAA,+IAAS;IACxB,8CAA8C;IAC9C,mDAAmD;IAEnD,MAAM,cAAc,OAAO;QACzB,EAAE,cAAc;QAChB,SAAS;QACT,aAAa;QAEb,0EAA0E;QAC1E,WAAW;QACX,cAAc;QACd,MAAM;QAEN,MAAM,cAAc;QAEpB;;aAIO;YACL,iCAAiC;YACjC,sEAAsE;YACtE,wDAAwD;YACxD,OAAO,IAAI,CAAC,eAAe,2CAA2C;YACtE,OAAO,OAAO;QACd,gEAAgE;QAClE;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAG,WAAU;kCAAmE;;;;;;kCAGjF,8OAAC;wBAAG,WAAU;kCAAkD;;;;;;;;;;;;0BAKlE,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAK,WAAU;4BAAY,UAAU;;8CAEpC,8OAAC;;sDACC,8OAAC;4CAAM,SAAQ;4CAAQ,WAAU;sDAAoD;;;;;;sDAGrF,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDACC,IAAG;gDACH,MAAK;gDACL,MAAK;gDACL,cAAa;gDACb,QAAQ;gDACR,OAAO;gDACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gDACxC,WAAU;;;;;;;;;;;;;;;;;8CAMhB,8OAAC;;sDACC,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAM,SAAQ;oDAAW,WAAU;8DAAoD;;;;;;8DAGxF,8OAAC;oDAAI,WAAU;8DACb,cAAA,8OAAC;wDAAE,MAAK;wDAAI,WAAU;kEAAkD;;;;;;;;;;;;;;;;;sDAK5E,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDACC,IAAG;gDACH,MAAK;gDACL,MAAK;gDACL,cAAa;gDACb,QAAQ;gDACR,OAAO;gDACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gDAC3C,WAAU;;;;;;;;;;;;;;;;;gCAMf,uBACC,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAE,WAAU;kDAAwB;;;;;;;;;;;8CAKzC,8OAAC;8CACC,cAAA,8OAAC;wCACC,MAAK;wCACL,UAAU;wCACV,WAAU;kDAET,0BACC,8OAAC,4NAAO;4CAAC,WAAU;;;;;mDAEnB;;;;;;;;;;;;;;;;;;;;;;kCAQV,8OAAC;wBAAE,WAAU;;4BAA0C;4BACnC;0CAClB,8OAAC,uKAAI;gCAAC,MAAK;gCAAY,WAAU;0CAA4D;;;;;;;;;;;;;;;;;;;;;;;;AAOvG"}}]
}